# Code Review: предложенные задачи

## 1) Исправление опечатки
**Проблема:** в `pom.xml` для `exec-maven-plugin` указан `mainClass=MainKt`, тогда как реальный entry point — `ru.lic.pdf.PdfServiceApplicationKt`.

**Задача:**
- Исправить `mainClass` у `exec-maven-plugin` на корректный класс `ru.lic.pdf.PdfServiceApplicationKt`.
- Добавить проверку запуска через `mvn -q -DskipTests exec:java` в CI/локально.

**Почему это важно:** текущая конфигурация выглядит как опечатка/копипаст и может ломать запуск через `exec:java`.

---

## 2) Исправление ошибки
**Проблема:** в `PdfMergeService` вызывается `Files.createDirectories(outputPath.parent)`. Если `outputFile` задан как имя файла без директории (например, `result.pdf`), то `outputPath.parent == null`, что приведёт к `NullPointerException`.

**Задача:**
- Защитить вызов создания директорий: создавать их только если `outputPath.parent != null`.
- Добавить явную валидацию `outputFile` и понятную ошибку для невалидного пути.

**Почему это важно:** сейчас сервис падает с 500 на валидном пользовательском сценарии (относительный путь без parent).

---

## 3) Исправление комментария / несоответствия документации
**Проблема:** комментарий `// вставляем страницу из insert PDF, если есть` в `PdfMergeService` может вводить в заблуждение: код берёт только **первую** страницу каждого вставляемого PDF (`getPage(0)`), остальные игнорируются.

**Задача:**
- Либо уточнить комментарий: вставляется только первая страница каждого файла.
- Либо обновить реализацию/документацию API, если ожидается вставка всех страниц.

**Почему это важно:** текущая формулировка не отражает фактическое поведение и может привести к неверным ожиданиям пользователей API.

---

## 4) Улучшение теста
**Проблема:** в проекте нет тестов на граничные сценарии объединения PDF.

**Задача:**
- Добавить unit-тест на `PdfMergeService` для кейса `outputFile` без parent (например, `out.pdf`) и убедиться, что метод не падает на этапе `createDirectories`.
- Добавить тест, что при пустом insert PDF выбрасывается `PdfGenerationException`.
- Добавить тест, что при несуществующем `baseFile` выбрасывается `PdfFileNotFoundException`.

**Почему это важно:** эти кейсы закрывают текущие риски регрессий в основной бизнес-логике.
